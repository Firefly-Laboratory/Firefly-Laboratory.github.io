{"version":3,"sources":["webpack:///./src/templates/blog-post.js"],"names":["BlogPost","componentDidMount","pre","window","location","hash","document","querySelector","className","all","querySelectorAll","item","addEventListener","e","Array","from","list","length","passedList","getBoundingClientRect","top","push","last","preItem","menuItem","encodeURIComponent","id","render","post","this","props","data","markdownRemark","role","to","frontmatter","author","name","width","height","alt","dateTime","date","title","tags","map","tagName","index","key","dangerouslySetInnerHTML","__html","tableOfContents","aria-label","excerpt","html","React","Component"],"mappings":"wOAMqBA,E,0GACnBC,kBAAA,WACE,IAAIC,EAAMC,OAAOC,SAASC,MAAQ,GAC9BH,IACFI,SAASC,cAAT,+BAAsDL,EAAtD,MAA+DM,UAAY,UAE7E,IADA,IAAIC,EAAMH,SAASI,iBAAT,wBAJQ,aAKb,IAAIC,EAAI,KACXA,EAAKC,iBAAiB,SAAS,SAAAC,GACzBX,IACaI,SAASC,cAAT,+BAAsDL,EAAtD,MACNM,UAAY,IAEvBG,EAAKH,UAAY,SACjBN,EAAMS,EAAKN,SAPf,MAAiBS,MAAMC,KAAKN,GAA5B,eAAmC,IAUnCH,SAASM,iBAAiB,UAAU,SAAAC,GAClC,IAAIG,EAAOF,MAAMC,KAAKT,SAASI,iBAAiB,mBAChD,GAAoB,IAAhBM,EAAKC,OAAT,CAEA,IADA,IAAIC,EAAa,GACjB,MAAiBF,EAAjB,eAAuB,CAAlB,IAAIL,EAAI,KACDA,EAAKQ,wBAAwBC,KAC5B,IAAIF,EAAWG,KAAKV,GAEjC,GAAKO,EAAWD,OAAhB,CACA,IAAIK,EAAOJ,EAAWA,EAAWD,OAAS,GAC1C,GAAIf,IAAQoB,EAAKjB,KAAM,CACrB,GAAIH,EAAK,CACP,IAAIqB,EAAUjB,SAASC,cAAT,+BAAsDL,EAAtD,MACVqB,IAASA,EAAQf,UAAY,IAEnC,IAAIgB,EAAWlB,SAASC,cAAT,+BACkBkB,mBAAmBH,EAAKI,IAD1C,MAGfF,EAAShB,UAAY,SACrBN,EAAMsB,EAASnB,Y,EAIrBsB,OAAA,WACE,IACMC,EADWC,KAAKC,MAAdC,KACUC,eAElB,OACE,kBAAC,IAAD,KACE,yBAAKxB,UAAU,+BACb,yBAAKA,UAAU,oBACb,yBAAKA,UAAU,sBACb,yBAAKA,UAAU,kBACb,yBAAKA,UAAU,gBACb,yBAAKA,UAAU,oBACb,4BAAQyB,KAAK,eAAezB,UAAU,aACpC,kBAAC,OAAD,CAAM0B,GAAE,WAAa,IAAYN,EAAKO,YAAYC,QAAW5B,UAAU,kBACrE,yBAAKA,UAAU,qBACb,kBAAC,IAAD,CAAOA,UAAU,kBACV6B,KAAI,GAAK,IAAYT,EAAKO,YAAYC,QACtCE,MAAM,MAAMC,OAAO,MAAMC,IAAKZ,EAAKO,YAAYC,aAK9D,yBAAK5B,UAAU,oCAAoCkB,GAAG,gBACpD,yBAAKlB,UAAU,uBACb,kBAAC,OAAD,CAAM0B,GAAE,WAAa,IAAYN,EAAKO,YAAYC,QAAW5B,UAAU,kBAAvE,QACQoB,EAAKO,YAAYC,OADzB,aAQR,yBAAK5B,UAAU,qBACb,4BAAQA,UAAU,kBAChB,wBAAIA,UAAU,wBACZ,wBAAIA,UAAU,6DACZ,0BAAMA,UAAU,uBAAuBiC,SAAS,cAAcb,EAAKO,YAAYO,QAGnF,wBAAIlC,UAAU,yBAAyBoB,EAAKO,YAAYQ,SAI5D,yBAAKnC,UAAU,0BACb,wBAAIA,UAAU,8BACZ,wBAAIA,UAAU,iCAAd,QACA,wBAAIA,UAAU,iCAEVoB,EAAKO,YAAYS,KAAKC,KAAI,SAACC,EAASC,GAClC,OAAO,kBAAC,OAAD,CAAMb,GAAE,SAAW,IAAYY,GAAvB,IAAoCE,IAAKD,GAAQD,QAKxE,yBAAKtC,UAAU,oBAAoByC,wBAAyB,CAAEC,OAAQtB,EAAKuB,oBAG7E,yBAAK3C,UAAU,qBAAqBkB,GAAG,kBACrC,6BAAS0B,aAAW,gBAAgB5C,UAAU,oBAC3CoB,EAAKyB,UAGV,yBAAK7C,UAAU,eAAeyC,wBAAyB,CAAEC,OAAQtB,EAAK0B,a,GArG9CC,IAAMC","file":"component---src-templates-blog-post-js-f9c37b7301161a40e7f3.js","sourcesContent":["import React from \"react\"\nimport { Link, graphql } from \"gatsby\"\nimport _ from \"lodash\"\nimport Layout from \"../components/layout\"\nimport Image from '../components/image'\n\nexport default class BlogPost extends React.Component {\n  componentDidMount() {\n    let pre = window.location.hash || ''\n    if (pre)\n      document.querySelector(`.table-of-contents a[href*=\"${pre}\"]`).className = 'active'\n    let all = document.querySelectorAll(`.table-of-contents a`)\n    for (let item of Array.from(all)) {\n      item.addEventListener('click', e => {\n        if (pre) {\n          let menuItem = document.querySelector(`.table-of-contents a[href*=\"${pre}\"]`)\n          menuItem.className = ''\n        }\n        item.className = 'active'\n        pre = item.hash\n      })\n    }\n    document.addEventListener('scroll', e => {\n      let list = Array.from(document.querySelectorAll('h2,h3,h4,h5,h6'))\n      if (list.length === 0) return\n      let passedList = []\n      for (let item of list) {\n        let top = item.getBoundingClientRect().top\n        if (top <= 50) passedList.push(item)\n      }\n      if (!passedList.length) return // 第一条的情况\n      let last = passedList[passedList.length - 1]\n      if (pre !== last.hash) {\n        if (pre) {\n          let preItem = document.querySelector(`.table-of-contents a[href*=\"${pre}\"]`)\n          if (preItem) preItem.className = ''\n        }\n        let menuItem = document.querySelector(\n          `.table-of-contents a[href*=\"${encodeURIComponent(last.id)}\"]`\n        )\n        menuItem.className = 'active'\n        pre = menuItem.hash\n      }\n    })\n  }\n  render () {\n    const { data } = this.props\n    const post = data.markdownRemark\n\n    return (\n      <Layout>\n        <div className=\"container article-container\">\n          <div className=\"article__content\">\n            <div className=\"c-garfield-the-cat\">\n              <div className=\"c-garfield-bio\">\n                <div className=\"l-author-bio\">\n                  <div className=\"bio-image__large\">\n                    <figure role=\"presentation\" className=\"bio-image\">\n                      <Link to={`/author/${_.kebabCase(post.frontmatter.author)}`} className=\"bio-image-link\">\n                        <div className=\"bio-image-wrapper\">\n                          <Image className=\"bio-image-image\"\n                                 name={`${_.kebabCase(post.frontmatter.author)}`}\n                                 width=\"100\" height=\"100\" alt={post.frontmatter.author} />\n                        </div>\n                      </Link>\n                    </figure>\n                  </div>\n                  <div className=\"l-author-bio-content author__desc\" id=\"author__desc\">\n                    <div className=\"author__desc__title\">\n                      <Link to={`/author/${_.kebabCase(post.frontmatter.author)}`} className=\"show-more-link\">\n                        关于作者 {post.frontmatter.author} 更多信息\n                      </Link>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"c-garfield-header\">\n                <header className=\"article-header\">\n                  <ul className=\"article-header--meta\">\n                    <li className=\"article-header--meta-item article-header--meta-item__date\">\n                      <time className=\"article-header--date\" dateTime=\"2021-05-14\">{post.frontmatter.date}</time>\n                    </li>\n                  </ul>\n                  <h1 className=\"article-header--title\">{post.frontmatter.title}</h1>\n                </header>\n              </div>\n\n              <div className=\"c-garfield-aside--meta\">\n                <ul className=\"meta-box meta-box--article\">\n                  <li className=\"meta-box--item meta-box--tags\">收录于：</li>\n                  <li className=\"meta-box--item meta-box--tags\">\n                    {\n                      post.frontmatter.tags.map((tagName, index) => {\n                        return <Link to={`/tags/${_.kebabCase(tagName)}/`} key={index}>{tagName}</Link>\n                      })\n                    }\n                  </li>\n                </ul>\n                <div className=\"table-of-contents\" dangerouslySetInnerHTML={{ __html: post.tableOfContents }} />\n              </div>\n\n              <div className=\"c-garfield-summary\" id=\"article__start\">\n                <section aria-label=\"quick summary\" className=\"article__summary\">\n                  {post.excerpt}\n                </section>\n              </div>\n              <div className=\"post-content\" dangerouslySetInnerHTML={{ __html: post.html }} />\n            </div>\n          </div>\n        </div>\n      </Layout>\n    )\n  }\n}\n\nexport const query = graphql`\n  query BlogPostBySlug($slug: String!) {\n    markdownRemark(fields: { slug: { eq: $slug } }) {\n      id\n      html\n      tableOfContents\n      frontmatter {\n        title\n        date(formatString: \"YYYY-MM-DD\")\n        tags\n        author\n      }\n      excerpt\n    }\n  }\n`\n"],"sourceRoot":""}